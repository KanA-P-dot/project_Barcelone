<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style4.css">
    <link rel="stylesheet" href="./css/panier.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">

    <title>Panier</title>
   
</head>
<body>
    <!DOCTYPE html>
    <html>
    <head>
        <title>My Cart</title>
    </head>
    <body>
        <header>
            <div class="logo">
                <img src="Cute Colorful Baby Daycare Center Logo.png" alt="School Stuff">
                <h1>School Stuff</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li class="dropdown">
                        <a href="#">Categories</a>
                        <ul class="dropdown-content">
                            <li><a href="primary.html">Primary</a></li>
                            <li><a href="middle.html">Middle</a></li>
                            <li><a href="High_school.html">High School</a></li>
                        </ul>
                    </li>
                    <li><a href="login.html">login</a></li>
                    <p><a href="panier.html"></h><i class="fas fa-shopping-cart"></i></a></p>
                </ul>
            </nav>
        </header>
        <div class="allbox">
            <div class="content">
                <br>
                <h1>My Cart</h1>
                <br>
    
                <div id="panier" class="panier">
                </div>
                <div class="total">
                    <div class="total">
                        <h4 id="total">Total :</h4>
                    </div>
                <div class="downcart">
                    <button onclick="viderPanier()">Empty the cart</button>
                    <button onclick="" class="chekout">Checkout</button>
                </div>
            </div>
        </div>

    
    
    <script>
        var panier = JSON.parse(localStorage.getItem("panier")) || [];

        function supprimerDuPanier(index) {
            panier.splice(index, 1);
            localStorage.setItem("panier", JSON.stringify(panier));
            mettreAJourPanier();
            calculerTotal();
        }
        function viderPanier() {
            panier = [];
            localStorage.setItem("panier", JSON.stringify(panier));
            mettreAJourPanier();
            }
            
        
        function mettreAJourPanier() {
            var panierDiv = document.getElementById("panier");
            panierDiv.innerHTML = "";
        
            for (var i = 0; i < panier.length; i++) {
                var produit = panier[i];
                var produitDiv = document.createElement("div");
                produitDiv.innerHTML = "<strong>Name: &#xA0</strong>" + produit.nom + ", &#xA0<strong>Price:</strong>&#xA0 " + produit.prix + "€";
        
                var boutonSupprimer = document.createElement("button");
                boutonSupprimer.textContent = "Remove";
                boutonSupprimer.onclick = (function(index) {
                    return function() {
                        supprimerDuPanier(index);
                    };
                })(i);
        
                produitDiv.appendChild(boutonSupprimer);
                panierDiv.appendChild(produitDiv);
            }
        }
        
        function calculerTotal() {
            var total = 0;
    
            for (var i = 0; i < panier.length; i++) {
                total += panier[i].prix;
            }

            var totalDiv = document.querySelector(".total h4");
            totalDiv.textContent = "Total : " + total + "€";
        }

        mettreAJourPanier();
        calculerTotal();


    </script>
    
</body>
</html>
